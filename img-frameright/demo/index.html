<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        background: #fafafa;
        min-height: 1500px;
      }

      .demo {
        background: #ddd;
        border: solid;
        resize: both;
        overflow: hidden;
      }

      .deer {
        width: 450px;
        height: 650px;
      }

      .iptc {
        width: 450px;
        height: 250px;
      }
    </style>
  </head>

  <body>
    <div class="demo deer">
      <img-frameright
        src="assets/deer.jpg"
        title="Hello my deer"
        alt="Deer being cute in the nature"
        id="deer"
        loglevel="debug"
        width="400"
        image-regions='[{
          "id": "oneanimal",
          "names": ["One animal"],
          "shape": "rectangle",
          "unit": "relative",
          "x": "0.217",
          "y": "0.708",
          "width": "0.239",
          "height": "0.1467"
        }, {
          "id": "threeanimals",
          "names": ["Three animals"],
          "shape": "rectangle",
          "unit": "pixel",
          "imageWidth": "1000",
          "imageHeight": "1500",
          "x": "245",
          "y": "1087",
          "width": "419",
          "height": "182"
        }]'
      >
      </img-frameright>
    </div>
    <label>
      <input
        type="checkbox"
        id="checkbox-deer"
        onchange="checkboxChanged('deer');"
        checked
      />
      Enable web component </label
    >&emsp;&emsp;&emsp;Resize me&#9650;

    <br /><br />
    <div class="demo iptc">
      <img-frameright
        src="assets/iptc/IPTC-PhotometadataRef-Std2021.1.jpg"
        alt="Hello world!"
        srcset="assets/iptc/IPTC-PhotometadataRef-Std2021.1.jpg 2000w,
              assets/iptc/IPTC-PhotometadataRef-Std2021.1-1024x512.jpg 1024w,
              assets/iptc/IPTC-PhotometadataRef-Std2021.1-768x384.jpg 768w"
        sizes="(max-width: 2000px) 100vw, 2000px"
        id="iptc"
        loglevel="warn"
        width="400"
        image-regions='[{
          "id": "persltr2",
          "names": ["Listener 1"],
          "shape": "rectangle",
          "unit": "relative",
          "x": "0.31",
          "y": "0.18",
          "width": "0.127",
          "height": "0.385"
        }]'
      >
      </img-frameright>
    </div>
    <label>
      <input
        type="checkbox"
        id="checkbox-iptc"
        onchange="checkboxChanged('iptc');"
        checked
      />
      Enable web component </label
    >&emsp;&emsp;&emsp;Resize me&#9650;

    <script type="module" src="../dist/src/img-frameright.js"></script>

    <script>
      // eslint-disable-next-line no-unused-vars
      function checkboxChanged(id) {
        // Replace <img ...> with <img-frameright ...></img-frameright> or vice
        // versa.

        const checkboxId = `checkbox-${id}`;
        const checkbox = document.getElementById(checkboxId);
        const element = document.getElementById(id);

        let newElement = null;
        if (checkbox.checked && element.tagName.toLowerCase() === 'img') {
          newElement = document.createElement('img-frameright');
        } else if (
          !checkbox.checked &&
          element.tagName.toLowerCase() === 'img-frameright'
        ) {
          newElement = document.createElement('img');
        }
        if (!newElement) {
          return;
        }

        // Copy all attributes from the old element to the new one:
        Array.from(element.attributes).forEach(attr => {
          newElement.setAttribute(attr.nodeName, attr.nodeValue);
        });

        element.parentNode.replaceChild(newElement, element);
      }
    </script>
  </body>
</html>
